FlowsitePopin.SWITCH_COOKIE=(clientSideData.IS_FULL_POINTS_SITE?"fullpoints.switch.flowsite.disable":"tam.switch.flowsite.disable");function FlowsitePopin(){this.switchTimer=null;this.switchTimeout=10;this.switchEnabled=false;var popinContainer=document.getElementById("flowsitePopinContainer");var context=window;if(window.frameElement){var targetDoc=window.frameElement.ownerDocument;context=targetDoc.defaultView||targetDoc.parentWindow;}this.cdoc=context.document;this.cdoc.body.appendChild(popinContainer);this.el=this.cdoc.getElementById("flowsitePopinContainer");var self=this;if(this.el!=null){this.cdoc.getElementById("confirmSwitch").onclick=function(e){self.saveCookie();if(self.callback!=null){self.closeDialog();self.callback.apply(self);}};this.cdoc.getElementById("flowsiteCloseModal").onclick=function(e){self.closeDialog();};}this.initParameters();}FlowsitePopin.prototype.initParameters=function(){if(clientSideData.IS_FULL_POINTS_SITE){this.switchTimeout=clientSideData.SWITCH_TO_TAM_TIMEOUT;this.switchEnabled=clientSideData.SWITCH_TO_TAM_ENABLED;}else{this.switchTimeout=clientSideData.SWITCH_TO_FULLPOINTS_TIMEOUT;this.switchEnabled=clientSideData.SWITCH_TO_FULLPOINTS_ENABLED;}};FlowsitePopin.prototype.startTimer=function(){var self=this;var index=this.switchTimeout;var timerSpan=this.cdoc.getElementById("flowswitchAutoTimer").getElementsByTagName("b")[0];var text=("innerText" in timerSpan)?"innerText":"textContent";timerSpan[text]=index;this.switchTimer=setInterval(function(){index=index-1;timerSpan[text]=index;if(index*1000<=0){self.clearTimer();self.saveCookie();self.closeDialog();if(self.callback!=null){self.callback.apply(self);}}},1000);};FlowsitePopin.prototype.clearTimer=function(){if(this.switchTimer!=null){clearInterval(this.switchTimer);}};FlowsitePopin.prototype.saveCookie=function(){var bSaveCookie=this.cdoc.getElementById("chkDisableFlowsitePopin").checked;if(bSaveCookie){$.jStorage.set(FlowsitePopin.SWITCH_COOKIE,"true");}};FlowsitePopin.prototype.closeDialog=function(){this.cdoc.body.classList.remove("open-modal-dialog");this.el.style.display="none";this.cdoc.getElementById("chkDisableFlowsitePopin").checked=null;this.clearTimer();};FlowsitePopin.prototype.openDialog=function(options){if(!options){return;}var self=this;if("function"==typeof options.callback){this.callback=options.callback;}var cookie=$.jStorage.get(FlowsitePopin.SWITCH_COOKIE);var aswitch=options.additionalSwitch!="false"&&options.additionalSwitch!=false;if(cookie==null&&this.switchEnabled&&aswitch){this.cdoc.body.classList.add("open-modal-dialog");this.el.style.display="block";this.startTimer();}else{if(this.callback!=null){this.callback.apply(this);}}};$(document).ready(function(){window.wdsFlowswitchPopin=new FlowsitePopin();});