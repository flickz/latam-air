var dotGroupSeparatorCommaDecimalSeparatorLocales=clientMessages["GLBL.list.DotGroupSeparatorCommaDecimalSeparatorMarkets"].split(";");var commaGroupSeparatorDotDecimalSeparatorLocales=clientMessages["GLBL.list.CommaGroupSeparatorDotDecimalSeparatorMarkets"].split(";");var spaceGroupSeparatorCommaDecimalSeparatorLocales=clientMessages["GLBL.list.SpaceGroupSeparatorCommaDecimalSeparatorMarkets"].split(";");function FormatData(dec,group,neg){this.dec=dec;this.group=group;this.neg=neg;}function formatCodes(locale){var dec=".";var group=",";var neg="-";if(jQuery.inArray(locale,dotGroupSeparatorCommaDecimalSeparatorLocales)!=-1){group=".";dec=",";}else{if(jQuery.inArray(locale,commaGroupSeparatorDotDecimalSeparatorLocales)!=-1){group=",";dec=".";}else{if(jQuery.inArray(locale,spaceGroupSeparatorCommaDecimalSeparatorLocales)!=-1){group=" ";dec=",";}}}return new FormatData(dec,group,neg);}function formatPriceFromFloat(value,opts){var f=[];var splitedValue=(value+"").split(".");if(splitedValue.length===2&&splitedValue[1].length===1){f=value+"0";f=f.split("");if(splitedValue[0].length>3){f.splice(f.length-6,0,opts.group);f.splice(f.length-3,1,opts.dec);}else{f.splice(f.length-3,1,opts.dec);}}else{if(splitedValue.length===2&&splitedValue[1].length===2){f=value+"";f=f.split("");if(splitedValue[0].length>3){f.splice(f.length-6,0,opts.group);f.splice(f.length-3,1,opts.dec);}else{f.splice(f.length-3,1,opts.dec);}}else{if(splitedValue.length===1){f=value+".00";f=f.split("");if(splitedValue[0].length>3){f.splice(f.length-6,0,opts.group);f.splice(f.length-3,1,opts.dec);}else{f.splice(f.length-3,1,opts.dec);}}}}f=f.join("");if(f.match(/\.00$/)){f=f.replace(".00","");}return f;}function formatPriceUsingLocale(text,options){var formatData=formatCodes(options.locale);var dec=formatData.dec;var group=formatData.group;var neg=formatData.neg;var validFormat="0#-,.";var prefix="";var negativeInFront=false;for(var i=0;i<options.format.length;i++){if(validFormat.indexOf(options.format.charAt(i))==-1){prefix=prefix+options.format.charAt(i);}else{if(i==0&&options.format.charAt(i)=="-"){negativeInFront=true;continue;}else{break;}}}var suffix="";for(var i=options.format.length-1;i>=0;i--){if(validFormat.indexOf(options.format.charAt(i))==-1){suffix=options.format.charAt(i)+suffix;}else{break;}}options.format=options.format.substring(prefix.length);options.format=options.format.substring(0,options.format.length-suffix.length);var number=text.replace(dec,".").replace(neg,"-");number=Math.round(100*number)/100;if(suffix=="%"){number=number*100;}var returnString="";var decimalValue=number%1;if(options.format.indexOf(".")>-1){var decimalPortion=dec;var decimalFormat=options.format.substring(options.format.lastIndexOf(".")+1);var decimalString=decimalValue.toFixed(decimalFormat.length)+"";decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var i=0;i<decimalFormat.length;i++){if(decimalFormat.charAt(i)=="#"&&decimalString.charAt(i)!="0"){decimalPortion+=decimalString.charAt(i);continue;}else{if(decimalFormat.charAt(i)=="#"&&decimalString.charAt(i)=="0"){var notParsed=decimalString.substring(i);if(notParsed.match("[1-9]")){decimalPortion+=decimalString.charAt(i);continue;}else{break;}}else{if(decimalFormat.charAt(i)=="0"){decimalPortion+=decimalString.charAt(i);}}}}returnString+=decimalPortion;}else{number=Math.round(number);}var ones=Math.floor(number);if(number<0){ones=Math.ceil(number);}var onePortion="";if(ones==0){onePortion="0";}else{var onesFormat="";if(options.format.indexOf(".")==-1){onesFormat=options.format;}else{onesFormat=options.format.substring(0,options.format.indexOf("."));}var oneText=Math.abs(ones)+"";var groupLength=9999;if(onesFormat.lastIndexOf(",")!=-1){groupLength=onesFormat.length-onesFormat.lastIndexOf(",")-1;}var groupCount=0;for(var i=oneText.length-1;i>-1;i--){onePortion=oneText.charAt(i)+onePortion;groupCount++;if(groupCount==groupLength&&i!=0){onePortion=group+onePortion;groupCount=0;}}}returnString=onePortion+returnString;if(number<0&&negativeInFront&&prefix.length>0){prefix=neg+prefix;}else{if(number<0){returnString=neg+returnString;}}if(!options.decimalSeparatorAlwaysShown){if(returnString.lastIndexOf(dec)==returnString.length-1){returnString=returnString.substring(0,returnString.length-1);}}returnString=prefix+returnString+suffix;return returnString;}(function(jQuery){var dotGroupSeparatorCommaDecimalSeparatorLocales=clientMessages["GLBL.list.DotGroupSeparatorCommaDecimalSeparatorMarkets"].split(";");var commaGroupSeparatorDotDecimalSeparatorLocales=clientMessages["GLBL.list.CommaGroupSeparatorDotDecimalSeparatorMarkets"].split(";");var spaceGroupSeparatorCommaDecimalSeparatorLocales=clientMessages["GLBL.list.SpaceGroupSeparatorCommaDecimalSeparatorMarkets"].split(";");function FormatData(dec,group,neg){this.dec=dec;this.group=group;this.neg=neg;}function formatCodes(locale){var dec=".";var group=",";var neg="-";if(jQuery.inArray(locale,dotGroupSeparatorCommaDecimalSeparatorLocales)!=-1){group=".";dec=",";}else{if(jQuery.inArray(locale,commaGroupSeparatorDotDecimalSeparatorLocales)!=-1){group=",";dec=".";}else{if(jQuery.inArray(locale,spaceGroupSeparatorCommaDecimalSeparatorLocales)!=-1){group=" ";dec=",";}}}return new FormatData(dec,group,neg);}jQuery.returnOptions=function(option,local){var formatData=formatCodes(local);if(option=="dec"){return formatData.dec;}if(option=="group"){return formatData.group;}};jQuery.fn.format=function(options){var options=jQuery.extend({},jQuery.fn.format.defaults,options);return this.each(function(){var text=jQuery(this).text();if(jQuery(this).is(":input")){text=jQuery(this).val();}var returnString=formatPriceUsingLocale(text,options);if(jQuery(this).is(":input")){jQuery(this).val(returnString);}else{jQuery(this).text(returnString);}});};jQuery.fn.format.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:false};})(jQuery);