if(!String.prototype.trim){(function(){var rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(rtrim,"");};})();}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]===obj){return i;}}return -1;};}if(!Array.prototype.filter){Array.prototype.filter=function(fun){if(this===void 0||this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError();}var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisArg,val,i,t)){res.push(val);}}}return res;};}if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}window.tamUtils=(function(){return{getElementForTmpls:function(element){return $("<div>").append(element).remove().html();},popSizedWin:function(uri,width,height){var left=(screen.width-width)/2;var top=(screen.height-height)/2;var thePopSizedWin=window.open(uri,"","scrollbars=yes,resizable=yes,width="+width+",height="+height+",left= "+left+",top="+top);if(navigator.appName=="Netscape"&&typeof thePopSizedWin!=="undefined"&&thePopSizedWin!=null){thePopSizedWin.focus();}return thePopSizedWin;},initPhoneMasks:function(countryCode,field){$(field).unbind("keyup keydown keypress");$(field).unmask();if(this.checkIfResourceIsValid("GLBL.text.phoneMask."+countryCode)&&this.checkIfResourceIsValid("GLBL.text.phoneMaskPlaceholder."+countryCode)&&this.checkIfResourceIsValid("GLBL.text.phoneMaskPlaceholderReplacer."+countryCode)){var inputMask=clientMessages["GLBL.text.phoneMask."+countryCode];var placeHolder=clientMessages["GLBL.text.phoneMaskPlaceholder."+countryCode];var placeHolderReplacement=clientMessages["GLBL.text.phoneMaskPlaceholderReplacer."+countryCode];if(placeHolder=="space"){placeHolder=" ";}if(placeHolderReplacement=="space"){placeHolderReplacement=" ";}$(field).mask(inputMask,{placeholder:placeHolder});if(placeHolderReplacement.length==1&&placeHolder.length==1){$(field).focus(function(){var firstPositionOfPlaceHolder=($(field).val()).indexOf(placeHolder);if(!(/\d/g.test($(field).val()))&&(placeHolder!=placeHolderReplacement)){var regExp=new RegExp(placeHolder,"g");$(field).val(($(field).val().substr(0,4)).replace(regExp,placeHolderReplacement)+$(field).val().substr(4));}$(field).customCaret(firstPositionOfPlaceHolder);});}}else{$(field).keyup(function(){$(this).val($(this).val().replace(/[^0-9]/g,""));});}},checkIfResourceIsValid:function(resource){var resourceValue=clientMessages[resource];if((resourceValue!=undefined)&&(resource!=undefined)){if(resourceValue.indexOf("undef")!=-1||(resourceValue=="????"+resource+"????")||resourceValue==undefined){return false;}return true;}return false;},checkIfPhoneIsValid:function(){var countryCode=$("select[name='CONTACT_POINT_MOBILE_COUNTRY_1']  option:selected").attr("data-country-code");var number=$("input[name='CONTACT_POINT_MOBILE_NUMBER_1']:visible").val();if($("input[name='CONTACT_POINT_MOBILE_NUMBER_1']:visible").length<=0){number=$("input[name='CONTACT_POINT_MOBILE_1']:visible").val();}if($("input[name='CONTACT_POINT_MOBILE_NUMBER_1']:visible").length>0){$("input[name='CONTACT_POINT_MOBILE_NUMBER_1']:visible").val();}else{$("input[name='CONTACT_POINT_MOBILE_1']:visible").val();}var stripRegExp=new RegExp("[^0-9]","g");var clearedPhone=number.replace(stripRegExp,"");if(clearedPhone.length==0){return false;}if(this.checkIfResourceIsValid("GLBL.text.phoneMaximalLength."+countryCode)&&this.checkIfResourceIsValid("GLBL.text.phoneMinimalLength."+countryCode)){var maximalLength=clientMessages["GLBL.text.phoneMaximalLength."+countryCode];var minimalLength=clientMessages["GLBL.text.phoneMinimalLength."+countryCode];if(!isNaN(parseInt(maximalLength))&&!isNaN(parseInt(minimalLength))){if((clearedPhone.length<parseInt(minimalLength))||(clearedPhone.length>parseInt(maximalLength))){return false;}}}return true;},goPost:function(url,params){$.blockUI({baseZ:2000});var $div=$("<div></div>").css("display","none");var $form=$("<form method='POST'></form>").attr("action",url);$.each(params,function(name,value){$("<input type='hidden' />").attr("name",name).attr("value",value).appendTo($form);});$form.appendTo($div);$div.appendTo("body");$form.submit();return false;},goPostAsync:function(url,params){if(typeof window.hidden_iframe_counter!="undefined"){window.hidden_iframe_counter++;}else{window.hidden_iframe_counter=0;}var $form=$("<form target='hidden_iframe_"+window.hidden_iframe_counter+"' method='POST'></form>").attr("action",url);var $iframe=$("<iframe style='display: none;' name='hidden_iframe_"+window.hidden_iframe_counter+"' id='hidden_iframe_"+window.hidden_iframe_counter+"'></iframe>");$.each(params,function(name,value){$("<input type='hidden' />").attr("name",name).attr("value",value).appendTo($form);});$iframe.appendTo("body");$form.appendTo("body");$form.submit();},getMaxDate:function(){var dates=[clientSideData["WDS_MAX_DATE_REVENUE"],clientSideData["WDS_MAX_DATE_REDEMPTION_INT"],clientSideData["WDS_MAX_DATE_REDEMPTION_DOM"]];var max=0;$.each(dates,function(){if(parseInt(this)>max){max=parseInt(this);}});return"+"+max+"D";},defaultDatePickerConfigurationObject:{numberOfMonths:1,showButtonPanel:true,minDate:0,buttonImageOnly:true,maxDate:"+"+clientSideData["WDS_MAX_DATE_REVENUE"]+"D",firstDay:clientSideData.WEEK_STARTS_ON_SUNDAY?0:1,hideIfNoPrevNext:true,changeMonth:false,showOn:"both",prevText:clientMessages["ALLP.text.Prev"],nextText:clientMessages["ALLP.text.Next"],dateFormat:clientSideData.IS_US_MARKET?clientMessages["GLBL.pattern.DayMonthYearDate.MarketUS"]:clientMessages["GLBL.pattern.DayMonthYearDate"],autoclose:true,monthNames:[clientMessages["ALLP.listelem.LongMonth.01"],clientMessages["ALLP.listelem.LongMonth.02"],clientMessages["ALLP.listelem.LongMonth.03"],clientMessages["ALLP.listelem.LongMonth.04"],clientMessages["ALLP.listelem.LongMonth.05"],clientMessages["ALLP.listelem.LongMonth.06"],clientMessages["ALLP.listelem.LongMonth.07"],clientMessages["ALLP.listelem.LongMonth.08"],clientMessages["ALLP.listelem.LongMonth.09"],clientMessages["ALLP.listelem.LongMonth.10"],clientMessages["ALLP.listelem.LongMonth.11"],clientMessages["ALLP.listelem.LongMonth.12"]],dayNames:[clientMessages["ALLP.listelem.LongDay.7"],clientMessages["ALLP.listelem.LongDay.1"],clientMessages["ALLP.listelem.LongDay.2"],clientMessages["ALLP.listelem.LongDay.3"],clientMessages["ALLP.listelem.LongDay.4"],clientMessages["ALLP.listelem.LongDay.5"],clientMessages["ALLP.listelem.LongDay.6"]],dayNamesMin:[clientMessages["ALLP.listelem.ShortDay.1"],clientMessages["ALLP.listelem.ShortDay.2"],clientMessages["ALLP.listelem.ShortDay.3"],clientMessages["ALLP.listelem.ShortDay.4"],clientMessages["ALLP.listelem.ShortDay.5"],clientMessages["ALLP.listelem.ShortDay.6"],clientMessages["ALLP.listelem.ShortDay.7"]],currentText:clientMessages["ALLP.text.today"],closeText:clientMessages["ALLP.text.done"],buttonText:clientMessages["ALLP.text.SelectDate"]}};})();function Utils(){this.init();}Utils.prototype.callAgentOnWdsAction=function(configJson){var action=configJson.ACTION;var eventName="PageError";switch(action){case"ERROR":eventName="PageError";break;case"AFTER_TIMEOUT":case"BEFORE_TIMEOUT":eventName="TAMSessionTimeout";break;case"UPSELL_CROSSSELL":eventName="Upsell";break;}var language="pt";if(clientSideData["LANGUAGE"]!=null&&clientSideData["LANGUAGE"]!=undefined){language=clientSideData["LANGUAGE"].toLowerCase();}if(clientSideData["LANGUAGE"]=="GB"){language="en";}if(clientSideData["LANGUAGE"]=="US"){language="en";}if(clientSideData["LANGUAGE"]=="BR"){language="pt";}if(!clientSideData.WDS_DISABLE_ASSISTANT&&clientSideData.WDS_ASSISTANT_ENABLED_MARKETS){NITAgent.ShowAgent(eventName,language,"",0,0,configJson);}};Utils.prototype.getMaxDate=function(){var dates=[clientSideData["WDS_MAX_DATE_REVENUE"],clientSideData["WDS_MAX_DATE_REDEMPTION_INT"],clientSideData["WDS_MAX_DATE_REDEMPTION_DOM"]];var max=0;$.each(dates,function(){if(parseInt(this)>max){max=parseInt(this);}});return"+"+max+"D";};Utils.prototype.init=function(){$("#toggleNtpTaxes").on("click",function(){if($(".ntpTax").filter(":visible").length>0){$(".ntpTax").hide();}else{$(".ntpTax").show();}});if(typeof clientSideData.PAGE_CODE=="undefined"||clientSideData.PAGE_CODE=="CONF"){$("#progressbar a.hf:not(:last)").each(function(){$(this).addClass("fl caption2 unclickable");});$("#progressbar form").remove();}else{$("#progressbar a.hf, footer a.hs, footer button.left").not("#buyIns, #resignIns, .selected").off("click").on("click",function(event){event.preventDefault();var id=$(this).attr("class").split("pb_")[1];if(id!=undefined){id=id.split(" ")[0];$.blockUI();var form=$("form#pb_"+id);if(clientSideData.PAGE_CODE=="ALPI"){if(typeof clientSideData["outboundPreselected"]!=="undefined"){form.find("input[name='outboundPreselected']").remove();$("<input type='hidden' name='outboundPreselected' value='"+clientSideData["outboundPreselected"]+"' />").appendTo(form);}if(typeof clientSideData["inboundPreselected"]!=="undefined"){form.find("input[name='inboundPreselected']").remove();$("<input type='hidden' name='inboundPreselected' value='"+clientSideData["inboundPreselected"]+"' />").appendTo(form);}}if(clientSideData.PAGE_CODE=="FSR"||clientSideData.PAGE_CODE=="PURF"){form.find("input[name='FROM_UPSL']").remove();}window.setTimeout(function(){form.submit();},700);}});}if(typeof clientSideData.PAGE_CODE=="undefined"||clientSideData.PAGE_CODE=="UPSL"){$(document).bind("keyup",function(ev){if(ev.keyCode==32){ev.preventDefault();$(".readPriceHack:focus").parent().parent().click();}if($("td .linkFlif.em:focus").length){var row=$("td .linkFlif.em:focus").parent().parent();var opts=row.find(".rightE:not('.disabled')");$(".selectedRowUpsl").removeClass("selectedRowUpsl");row.addClass("selectedRowUpsl");if(ev.keyCode==39){ev.preventDefault();var selected=opts.parent().find(".selectedFF");if(selected.length>0){selected.next().trigger("click");$(selected).next().find(".readPriceHack").click();}else{opts.eq(0).trigger("click");opts.eq(0).find(".readPriceHack").click();}}else{if(ev.keyCode==37){ev.preventDefault();var selected=opts.parent().find(".selectedFF");if(selected.length>0){selected.prev().trigger("click");$(selected).prev().find(".readPriceHack").click();}else{opts.eq(0).trigger("click");opts.eq(0).find(".readPriceHack").click();}}}}});}};Utils.prototype.getLocalIndependetAmount=function(text_){var text=text_+"";if($.returnOptions("group",clientSideData["WDS_MARKET"])==","){text=text.replace(",","");}else{if($.returnOptions("group",clientSideData["WDS_MARKET"])!=" "){text=text.replace(".","");text=text.replace(",",".");}else{text=text.replace(/&nbsp;/g,"");text=text.replace(/\s/g,"");text=text.replace(",",".");}}return parseFloat(text);};Utils.prototype.isCarFlow=function(){if(clientSideData!=null&&typeof clientSideData.CAR_FLOW!=="undefined"&&clientSideData.CAR_FLOW){return true;}return false;};Utils.prototype.isHotelFlow=function(){if(clientSideData!=null&&typeof clientSideData.HOTEL_FLOW!=="undefined"&&clientSideData.HOTEL_FLOW){return true;}return false;};Utils.prototype.getIataCountry=function(iata){var continents;if(this.isCarFlow()){continents=clientSideData.CAR_LOCATIONS.LIST_SUBLOCATIONS;}else{continents=clientSideData.LOCATIONS.LIST_SUBLOCATIONS;}for(var i=0;i<continents.length;i++){var countries=continents[i].LIST_SUBLOCATIONS;for(var j=0;j<countries.length;j++){var country=countries[j].CODE;var locations=countries[j].LIST_SUBLOCATIONS;for(var k=0;k<locations.length;k++){if(iata===locations[k].CODE){return country;}}}}return"";};Utils.prototype.isDomestic=function(IATACode){var airportList;if(this.isCarFlow()){var regions=clientSideData.CAR_LOCATIONS.LIST_SUBLOCATIONS;for(var i=0;i<regions.length;i++){if("SAMER"==regions[i].CODE||"BRASIL"==regions[i].CODE){var countries=regions[i].LIST_SUBLOCATIONS;for(var j=0;j<countries.length;j++){if("BR"==countries[j].CODE){airportList=countries[j].LIST_SUBLOCATIONS;break;}}}}}else{if(this.isHotelFlow()){var regions=clientSideData.HOTEL_LOCATIONS.LIST_SUBLOCATIONS;for(var i=0;i<regions.length;i++){if("SAMER"==regions[i].CODE||"BRASIL"==regions[i].CODE){var countries=regions[i].LIST_SUBLOCATIONS;for(var j=0;j<countries.length;j++){if("BR"==countries[j].CODE){airportList=countries[j].LIST_SUBLOCATIONS;break;}}}}}else{var regions=clientSideData.LOCATIONS.LIST_SUBLOCATIONS;for(var i=0;i<regions.length;i++){if("SAMER"==regions[i].CODE||"BRASIL"==regions[i].CODE){var countries=regions[i].LIST_SUBLOCATIONS;for(var j=0;j<countries.length;j++){if("BR"==countries[j].CODE){airportList=countries[j].LIST_SUBLOCATIONS;break;}}}}}}for(var i=0;i<airportList.length;i++){if(airportList[i].CODE==IATACode){return true;}}return false;};Utils.prototype.isSouthAmerican=function(IATACode){var regions;if(this.isCarFlow()){regions=clientSideData.CAR_LOCATIONS.LIST_SUBLOCATIONS;}else{if(this.isHotelFlow()){regions=clientSideData.HOTEL_LOCATIONS.LIST_SUBLOCATIONS;}else{regions=clientSideData.LOCATIONS.LIST_SUBLOCATIONS;}}for(var i=0;i<regions.length;i++){var countryList;if("SAMER"==regions[i].CODE){countryList=regions[i].LIST_SUBLOCATIONS;for(var j=0;j<countryList.length;j++){var airportList=countryList[j].LIST_SUBLOCATIONS;for(var k=0;k<airportList.length;k++){if(airportList[k].CODE==IATACode){return true;}}}}else{if("BRASIL"==regions[i].CODE||"AMERICA"==regions[i].CODE){countryList=regions[i].LIST_SUBLOCATIONS;for(var j=0;j<countryList.length;j++){var airportList=countryList[j].LIST_SUBLOCATIONS;for(var k=0;k<airportList.length;k++){if(airportList[k].CODE==IATACode&&"SAMER"==airportList[k].OLD_REGION_CODE){return true;}}}}}}return false;};Utils.prototype.getAreaForIATA=function(IATACode){if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.NORTH_BRAZIL)){return"NORTH_BRAZIL";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.NORTH_EASTERN_BRAZIL)){return"NORTH_EASTERN_BRAZIL";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.SOUTH_BRAZIL)){return"SOUTH_BRAZIL";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.SOUTH_EASTERN_BRAZIL)){return"SOUTH_EASTERN_BRAZIL";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.CENTER_BRAZIL)){return"CENTER_BRAZIL";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.NORTH_AMERICA)){return"NORTH_AMERICA";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.CENTER_AMERICA)){return"CENTER_AMERICA";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.SOUTH_AMERICA)){return"SOUTH_AMERICA";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.EUROPE)){return"EUROPE";}else{if(-1!=$.inArray(IATACode,clientSideData.IATA_PER_AREAS.OTHERS)){return"OTHERS";}}}}}}}}}}return"";};Utils.prototype.isSouthAmericaRoute=function(outboundIATACode,inboundIATACode){var isOutboundSA=this.isSouthAmerican(outboundIATACode);var isInboundSA=this.isSouthAmerican(inboundIATACode);return isOutboundSA&&isInboundSA;};Utils.prototype.isDomesticRoute=function(outboundIATACode,inboundIATACode){var isOutboundDomestic=this.isDomestic(outboundIATACode);var isInboundDomestic=this.isDomestic(inboundIATACode);return isOutboundDomestic&&isInboundDomestic;};Utils.prototype.createPageTicketInput=function(pageTicket){return $("<input type='hidden' name='PAGE_TICKET' value='"+pageTicket+"' />");};Utils.prototype.isCompanionFlow=function(){return clientSideData.IS_COMPANION_FLOW;};Utils.prototype.datepickerFixIETodayButton=function(){if($.browser.msie){$("input.ui-datepicker").focus(function(){var focusFunctions=[];for(var key in $(this).data("events")["focus"]){if($(this).data("events")["focus"].hasOwnProperty(key)){focusFunctions.push($(this).data("events")["focus"][key]);}}$(this).unbind("focus");function rebindFocus(obj){for(var i=0;i<focusFunctions.length;i++){$(obj).bind("focus",focusFunctions[i].handler);}}var innerThis=$(this);window.setTimeout(function(){rebindFocus(innerThis);},700);});}};Utils.prototype.putHttpsIfHttps=function(url){var _url=url;if(window.location.href.match("https")){if(!_url.match("https")){_url=_url.replace("http","https");}}return _url;};Utils.prototype.isUSMarket=function(){return clientSideData.IS_US_MARKET;};Utils.prototype.closePopin=function(popin){WDSError.WDSErrorDivID="WDSError";WDSError.WDSErrorContentDivID="WDSErrorContainer";if(this[popin]!=null){this[popin].close();}this.isPopinOpen=false;};Utils.prototype.isWeekStartingOnSunday=function(){return clientSideData.WEEK_STARTS_ON_SUNDAY;};Utils.prototype.formatPrice=function(price){var formatNumberConfig;if(clientSideData["WDS_MARKET"]!="PY"){formatNumberConfig={format:clientMessages["ALLP.pattern.js.PriceWithDecimals"],locale:clientSideData["WDS_MARKET"]};}else{formatNumberConfig={format:clientMessages["ALLP.pattern.js.RoundedPrice"],locale:clientSideData["WDS_MARKET"]};}return formatPriceUsingLocale(price+"",formatNumberConfig);};Utils.prototype.formatRoundedPrice=function(price){var formatNumberConfig={format:clientMessages["ALLP.pattern.js.RoundedPrice"],locale:clientSideData["WDS_MARKET"]};var formattedPrice=formatPriceUsingLocale(price+"",formatNumberConfig);return formattedPrice;};Utils.prototype.formatPoints=function(points){var formatNumberConfig={format:clientMessages["ALLP.pattern.js.Point"],locale:clientSideData["WDS_MARKET"]};var formattedPrice=formatPriceUsingLocale(points+"",formatNumberConfig);return formattedPrice;};Utils.prototype.formatPriceWithCurrency=function(price,currencyCode){var currencySymbol=null;var formattedPrice=null;if(typeof price==="undefined"||typeof currencyCode==="undefined"){return"-";}if(currencyCode==="Points"){currencySymbol=clientMessages["RD_UPSL.text.Pts"];formattedPrice=this.formatPoints(price);}else{currencySymbol=clientSideData.CURRENCIES_MAP[currencyCode];formattedPrice=this.formatPrice(price);}if((""+clientSideData.CURRENCIES_TO_SWITCH).indexOf(currencyCode)!=-1){return currencySymbol+" "+formattedPrice;}else{return formattedPrice+" "+currencySymbol;}};Utils.prototype.getAmountWithoutCurrency=function(amount){return Number(amount.replace(/[^0-9\,]+/g,"").replace(",","."));};Utils.prototype.decoratePriceWithCurrency=function(price,currencyCode){var currencySymbol=null;if(currencyCode==="Points"){currencySymbol=clientMessages["RD_UPSL.text.Pts"];}else{currencySymbol=clientSideData.CURRENCIES_MAP[currencyCode];}if((""+clientSideData.CURRENCIES_TO_SWITCH).indexOf(currencyCode)!=-1){return currencySymbol+" "+price;}else{return price+" "+currencySymbol;}};Utils.prototype.addErrorToForm=function(wdkForm,errorMessage,referingEl){if(typeof referingEl==="undefined"){referingEl=null;}wdkForm.wdkform("option","errorPanel").errorPanel("addError",referingEl,null,errorMessage);if(referingEl!=null&&$(referingEl).prop("nodeName")=="SELECT"){referingEl.selectBox("destroy").selectBox();}else{if(referingEl!=null&&referingEl.prop("nodeName")=="INPUT"){referingEl.addClass("em");}}};Utils.prototype.removeErrorToForm=function(wdkForm,errorMessage,inputs){if(typeof inputs!=="undefined"&&inputs.length>0){for(var key in inputs){if(inputs.hasOwnProperty(key)){inputs[key].removeClass("em");if(inputs[key].prop("nodeName")=="SELECT"){inputs[key].selectBox("destroy").selectBox();}}}}if(wdkForm.errorPanel("hasError")){wdkForm.wdkform("option","errorPanel").find("li").each(function(){if($(this).find("a").text()==errorMessage){$(this).hide();}});if(wdkForm.wdkform("option","errorPanel").find("li:visible").length==0){wdkForm.wdkform("option","errorPanel").errorPanel().hide();}}};Utils.prototype.parseDate=function(input){var parts=[];parts[parts.length]=input.substr(0,4);parts[parts.length]=input.substr(4,2);parts[parts.length]=input.substr(6,2);return new Date(parts[0],parts[1]-1,parts[2]);};Utils.prototype.createBEDate=function(date){var tempDate=date.split("/");var tempPatternedDate=[tempDate[0],tempDate[1],tempDate[2]];if(theUtils.isUSMarket()==true){tempPatternedDate=[tempDate[1],tempDate[0],tempDate[2]];}if(date==""){var i=theUtils.isUSMarket()?1:0;tempPatternedDate[i]=undefined;}return tempPatternedDate[2].toString()+tempPatternedDate[1].toString()+tempPatternedDate[0].toString();};Utils.prototype.getUtcDate=function(localTimestamp){var date=new Date(localTimestamp);date.setMinutes(date.getMinutes()+date.getTimezoneOffset());return date;};Utils.prototype.checkPaxTypeAmount=function(obj){var adt=0,chd=0,inf=0;for(var key in obj){if(obj.hasOwnProperty(key)&&key.indexOf("TRAVELLER_TYPE_")===0){if(obj[key]==="ADT"){adt++;}else{chd++;}}else{if(obj.hasOwnProperty(key)&&key.indexOf("HAS_INFANT")===0){inf++;}}}return{"ADT":adt,"CHD":chd,"INF":inf};};Utils.prototype.showAntiFraudPopin=function(){var antifraudCondition=clientSideData.antiFraudDisplay==="TRUE";if(clientSideData.PAGE_CODE=="RD_UPSL"){antifraudCondition=antifraudCondition&&$.jStorage.get("doNotShowMoreAwareness")!=true;}if(antifraudCondition){var antiFraud=$("#customerAwareness");antiFraud.removeClass("none");$("#awarenessClose").click(function(){$("#customerAwareness").dialog("close");});var dialogConfig={autoOpen:true,draggable:false,width:890,modal:true,resizable:false};antiFraud.dialog(dialogConfig);$("[name='chamar_autenticador']").submit();antiFraud.on("click","#doNotShowAwareness",function(){if($(this).is(":checked")){$.jStorage.set("doNotShowMoreAwareness",true);}else{$.jStorage.deleteKey("doNotShowMoreAwareness");}});}$("#enterYourCode").click(function(){theUtils.showAntiFraudPopin();});};Utils.prototype.isEmpty=function(variable){if(variable==null||typeof variable=="undefined"||variable==""){return true;}return false;};Utils.prototype.ALPI_INPUTS=["TITLE_","FIRST_NAME_","MIDDLE_NAME_","LAST_NAME_","DATE_OF_BIRTH_DAY_","DATE_OF_BIRTH_MONTH_","DATE_OF_BIRTH_YEAR_","PASSPORT_NUMBER_","PASSPORT_EXPIRY_DAY_","PASSPORT_EXPIRY_MONTH_","PASSPORT_EXPIRY_YEAR_","PASSPORT_COUNTRY_","CONTACT_POINT_EMAIL_","CONTACT_POINT_MOBILE_COUNTRY_","CONTACT_POINT_MOBILE_NUMBER_","CONTACT_POINT_MOBILE_TYPE_","GENDER_","REDRESS_NUMBER_","PREF_AIR_FREQ_AIRLINE_","PREF_AIR_FREQ_NUMBER_","ALPI_CPF_NUMBER_"];Utils.prototype.CORPORATE_ALPI_INPUTS=["TITLE_","FIRST_NAME_","MIDDLE_NAME_","LAST_NAME_","DATE_OF_BIRTH_DAY_","DATE_OF_BIRTH_MONTH_","DATE_OF_BIRTH_YEAR_","PASSPORT_NUMBER_","PASSPORT_EXPIRY_DAY_","PASSPORT_EXPIRY_MONTH_","PASSPORT_EXPIRY_YEAR_","PASSPORT_COUNTRY_","CONTACT_POINT_EMAIL_","CONTACT_POINT_MOBILE_COUNTRY_","CONTACT_POINT_MOBILE_NUMBER_","CONTACT_POINT_MOBILE_TYPE_","GENDER_","REDRESS_NUMBER_","COST_CENTER_","ALPI_CPF_NUMBER_"];Utils.prototype.saveAlpiInputsInCache=function(paramsType){var resp=$.jStorage.get("CACHED_PAXES");if(resp==null){resp={};}var fieldsToCheck=this.ALPI_INPUTS;if(paramsType==="CORPORATE_ALPI"){fieldsToCheck=this.CORPORATE_ALPI_INPUTS;}for(var possibleField in fieldsToCheck){if(fieldsToCheck.hasOwnProperty(possibleField)){$("*[id^="+fieldsToCheck[possibleField]+"], *[id^=INFANT_"+fieldsToCheck[possibleField]+"]").each(function(){resp[$(this).attr("id")]=$(this).val();});}}$.jStorage.set("CACHED_PAXES",resp);};Utils.prototype.removeAlpiInputsInCache=function(){$.jStorage.set("CACHED_PAXES",null);};Utils.prototype.getPreselectedFlight=function(aBound){var ffPattern=/ff-(\w+)/;var flightPattern=/flightId-(\d+)/;var bound=$("."+aBound+" td.ff.selectedFF").attr("class").match(ffPattern)[1]+"_"+$("."+aBound+" td.ff.selectedFF").parent().attr("class").match(flightPattern)[1];return bound;};Utils.prototype.removeLastWord=function(nameString){var lastSpace=nameString.lastIndexOf(" ");if(lastSpace!=-1){var removedString=nameString.slice(0,lastSpace);return removedString;}else{return -1;}};Utils.prototype.getPreselectedFlightNumber=function(aBound){return $("."+aBound+" .selectedFF").parents("tr").data("flightnumber");};Utils.prototype.getPreselectedFf=function(aBound){return $("."+aBound+" .selectedFF").data("cellFareFamily");};Utils.prototype.calculateDurationOver24hours=function(durInMillis){if(durInMillis==0){return 0;}var duration=new Date(durInMillis);var hoursToAdd=0;if(duration.getUTCDate()>1){hoursToAdd=(duration.getUTCDate()-1)*24;}else{hoursToAdd=0;}var hourDuration=parseInt(duration.getUTCHours())+parseInt(hoursToAdd);if(hourDuration<10){hourDuration="0"+hourDuration;}var minuteDuration=duration.getUTCMinutes();if(minuteDuration<10){minuteDuration="0"+minuteDuration;}return hourDuration+"h "+minuteDuration+"m";};Utils.prototype.uniqueArray=function(arr){var obj={};var result=[];for(var i=0;i<arr.length;i++){if(!obj[arr[i]]){obj[arr[i]]=true;result.push(arr[i]);}}return result;};Utils.prototype.setCookiesInUrl=function(form){var form=$(form);if(_gat!=undefined){var pageTracker=_gat._getTrackerByName("tracker0");var gaUrl=pageTracker._getLinkerUrl("");gaUrl=gaUrl.substring(1);var gaUrlArr=gaUrl.split("&");$.each(gaUrlArr,function(){var item=this.split("=");if(item.indexOf("__utmz")>=0){item[0]="__utmz";item[1]=this.substr(this.indexOf("=")+1);}$(form).append("<input type='hidden' name='"+item[0]+"' value='"+item[1]+"'/>");});}};Utils.prototype.getDatePickerCellDate=function($td){var day=parseInt($td.find("a").html());if(day<10){day="0"+day;}var month=parseInt($td.data("month"));month++;if(month<10){month="0"+month;}return $.datepicker.parseDate("yymmdd",""+$td.data("year")+month+day);};Utils.prototype.addHighlightingBehavior=function(outboundDatePickerId,inboundDatePickerId){var self=this;var $outboundDatePicker=$("#"+outboundDatePickerId);var $inboundDatePicker=$("#"+inboundDatePickerId);var outboundCellClass="dp-"+outboundDatePickerId;var inboundCellClass="dp-"+inboundDatePickerId;var displayRangeTimerId;var createBeforeShowDay=function(isOutbound){return function(cellDate){var $this=$(this);var $datePicker=isOutbound?$outboundDatePicker:$inboundDatePicker;var $otherDatePicker=$(isOutbound?$inboundDatePicker:$outboundDatePicker);var css=isOutbound?outboundCellClass:inboundCellClass;if($otherDatePicker.length>0){var otherDate=$otherDatePicker.datepicker("getDate");var date=$this.datepicker("getDate");if(otherDate!=null&&date!=null&&(isOutbound&&cellDate>=date&&cellDate<=otherDate||!isOutbound&&cellDate>=otherDate&&cellDate<=date)){css+=" range-highlight";}}return[true,css];};};var createMouseEnterHandler=function(isOutbound){return function(event){if(typeof event.originalEvent!="undefined"){var $datePicker=isOutbound?$outboundDatePicker:$inboundDatePicker;var $otherDatePicker=isOutbound?$inboundDatePicker:$outboundDatePicker;if(typeof displayRangeTimerId!="undefined"&&displayRangeTimerId!=null){clearTimeout(displayRangeTimerId);displayRangeTimerId=null;}var date=$datePicker.datepicker("getDate");var otherDate=$otherDatePicker.datepicker("getDate");if(otherDate!=null){var $this=$(this);if(!$this.hasClass("ui-state-disabled")){var dateHovered=self.getDatePickerCellDate($this);var $tds=$this.closest(".ui-datepicker").find("td");$tds.each(function(){var $thisCell=$(this);if(!$thisCell.hasClass("ui-state-disabled")){var cellDate=self.getDatePickerCellDate($thisCell);var highlightCell=isOutbound&&cellDate>=dateHovered&&cellDate<=otherDate||!isOutbound&&cellDate>=otherDate&&cellDate<=dateHovered;$thisCell.toggleClass("range-highlight",highlightCell);}});}}}};};var createMouseLeaveHandler=function(isOutbound){return function(event){if(typeof event.originalEvent!="undefined"){var $datePicker=isOutbound?$outboundDatePicker:$inboundDatePicker;var $otherDatePicker=isOutbound?$inboundDatePicker:$outboundDatePicker;var $this=$(this);var date=$datePicker.datepicker("getDate");var otherDate=$otherDatePicker.datepicker("getDate");var $tds=$this.closest(".ui-datepicker").find("td");displayRangeTimerId=setTimeout(function(){$tds.each(function(){var $thisCell=$(this);if(!$thisCell.hasClass("ui-state-disabled")){var cellDate=self.getDatePickerCellDate($thisCell);var highlightCell=date!=null&&otherDate!=null&&(isOutbound&&cellDate>=date&&cellDate<=otherDate||!isOutbound&&cellDate>=otherDate&&cellDate<=date);$thisCell.toggleClass("range-highlight",highlightCell);}});},30);}};};$(document).on("mouseenter","."+outboundCellClass,createMouseEnterHandler(true));$(document).on("mouseleave","."+outboundCellClass,createMouseLeaveHandler(true));$(document).on("mouseenter","."+inboundCellClass,createMouseEnterHandler(false));$(document).on("mouseleave","."+inboundCellClass,createMouseLeaveHandler(false));$outboundDatePicker.datepicker("option","beforeShowDay",createBeforeShowDay(true));$inboundDatePicker.datepicker("option","beforeShowDay",createBeforeShowDay(false));};Utils.prototype.validateCPF=function(cpf){var DIGIT_CHARCODE_OFFSET=48;var digit1=0;for(var i=0;i<9;i++){digit1+=(i+1)*(cpf.charCodeAt(i)-DIGIT_CHARCODE_OFFSET);}digit1=digit1%11;digit1=digit1%10;var digit2=0;for(var i=1;i<9;i++){digit2+=i*(cpf.charCodeAt(i)-DIGIT_CHARCODE_OFFSET);}digit2+=9*digit1;digit2=digit2%11;digit2=digit2%10;var cpf_digit10=(cpf.charCodeAt(9)-DIGIT_CHARCODE_OFFSET);var cpf_digit11=(cpf.charCodeAt(10)-DIGIT_CHARCODE_OFFSET);if(digit1==cpf_digit10&&digit2==cpf_digit11){return true;}return false;};$(document).ready(function(){$.blockUI.defaults.baseZ=1006;$.blockUI.defaults.onBlock=function(){$.blockUI.defaults.isBlocked=true;};$.blockUI.defaults.onUnblock=function(){$.blockUI.defaults.isBlocked=false;};$.fn.qtip.zindex=500;window.onunload=function(){$.unblockUI();};$(".printBtn").click(function(){window.print();});if($.browser.msie){$(".register").click(function(){window.open($(this).prop("href"));});}if($.browser.opera){$("legend").css("float","none");$(".formadv").css("padding-left","10px");$("#searchPanel p.column2").css("margin-left","10px");$("#alpi input[size='24']").attr("size","22");$("table.bound th:nth-child(2),table.bound th:nth-child(3),table.bound th:nth-child(4)").css("border-left-color","#fff");$("tr.details .right").css("border-left-color","#fff");$("#purf #purf_inst").attr("size","62");}if((navigator.userAgent.indexOf("Safari")>0)&&(navigator.userAgent.indexOf("Chrome")==-1)){$("#purf .form2 label.inactive").css("opacity","1").css("background","#f9f9f9").css("color","#999");}if(clientSideData.PAGE_CODE!=="HOME_SEARCH"&&clientSideData.PAGE_CODE!=="ATCI"){$(document).ajaxStart(function(){$.blockUI();}).ajaxStop(function(){$.unblockUI();});}$("aside#rightPanel").on("click","h3[data-wdk-toggle-target='#searchPanel']",function(){if($(this).hasClass("minus")){setTimeout(function(){$("#searchPanel select").selectBox("destroy").selectBox();},0);}});$("html").click(function(){if($("#shareSection").find("button").hasClass("opened")){$("#menuShare").addClass("none");$("#shareSection button").removeClass("opened");}});$("#shareSection button#menuShareButton").click(function(event){event.stopPropagation();$("#menuShare").removeClass("none");$("#shareSection button#menuShareButton").addClass("opened");});$("#menuShare li").click(function(){$(this).parent().addClass("none");});});var theUtils=new Utils();