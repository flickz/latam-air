!function(){function e(e,a,n,r){var o=a[0];if(d[o]===!0)i(r,g.inProgress("The current request is still running."));else{var s=!1,u=function(e,t){d[o]=!1,s||(s=!0,i(r,e,t))};if(d[o]=!0,v.models[o]&&i(v.models[o].preventRequest,u)===!0)return;try{t(e,a.join("/"),n,u)}catch(c){i(u,g.runtime(c))}}}function t(e,t,a,n){var r=new XMLHttpRequest;return r.open(e,s+t),r.timeout=u,r.onerror=function(e){i(n,g.xhrRequest(e))},r.ontimeout=function(e){i(n,g.xhrTimeout(e))},r.onload=function(e){try{e.target.json=JSON.parse(e.target.response)}catch(t){}i(n,null,e.target)},r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.setRequestHeader("x-client-origin",o()),r.send(JSON.stringify(a)),r}function a(){var e=[],t=new Date(2e3,0,1).toGMTString().replace(",","");return!location.host.split(".").reverse().every(function(a){return e.unshift(a),document.cookie=p+"=;path=/;domain=."+e.join(".")+";expires="+t,!!y.getUserId()})}function n(){return document.cookie.match(new RegExp("^.*?"+p+"=([^;]+).*"))&&RegExp.$1}function r(e){a();var t=[],n=(new Date).getFullYear()+2,r=new Date(n,0,1).toGMTString().replace(",","");return!location.host.split(".").reverse().every(function(a){return t.unshift(a),document.cookie=p+"="+e+";path=/;domain=."+t.join(".")+";expires="+r,!y.getUserId()})}function o(){var e=location.protocol+"//"+location.hostname,t="";return""!==location.port&&"80"!==location.port&&(t=":"+location.port),e+t}function i(){var e=[].slice.call(arguments,0),t=e[0],a=e.slice(1);return"function"==typeof t?t.apply(null,a):!1}var s=location.protocol+"//"+("cell.argos4.me:"+("https:"===location.protocol?"443":"80")+"//pixel/api").replace(/\/\//g,"/"),u=1e4,d={},c="/createUser",l="/saveData",f="/cart",p="c_uid",y={createUser:function(t,a){(0===arguments.length||1===arguments.length&&t&&t.call)&&(a=t,t={user:"<none>"}),e("POST",[c],t,v.wrapper(a,c))},saveData:function(t,a){(0===arguments.length||1===arguments.length&&t&&t.call)&&(a=t,t={}),y.createUser(function(){t.referrer=document.referrer,t.location=location.toString(),e("POST",[l,n()],t,v.wrapper(a,l))})},cart:{get:function(t){y.createUser(function(){e("GET",[f,n()],"",v.wrapper(t,f))})},save:function(t,a){y.createUser(function(){e("POST",[f,n()],t,v.wrapper(a,f))})},remove:function(t,a){y.createUser(function(){e("DELETE",[f,n()],t,v.wrapper(a,f))})},update:function(t,a){y.createUser(function(){e("PUT",[f,n()],t,v.wrapper(a,f))})}},getUserId:n,getClientOrigin:o},v={models:{"/createUser":{createModel:function(e){var t=201===e.status||!("status"in e),a=v.models.createModel(e,{user:"user",id:"_id"});return t?a:!1},handleConsistentResponse:function(e){e&&r(e.id)},preventRequest:function(e){var t=n();return t?(e(null,{json:{_id:t}}),!0):!1}},"/saveData":{createModel:function(e){var t=201===e.status||!("status"in e),a=v.models.createModel(e,{user_id:"user_id",user_data:"user_data",id:"_id"});return t?a:!1}},"/cart":{createModel:function(e){var t=201===e.status||204===e.status||200===e.status,a=v.models.createModel(e);return a.data=e.json,t?a:!1}},info:function(e){return e&&{status_code:e.status,status_text:e.statusText,url:e.responseURL,body:e.response}},createModel:function(e,t){var a={data:{},info:v.models.info(e)};if(!t)return a;var n=e&&e.json;if(n)for(var r in t)a.data[r]=n[t[r]];return a}},wrapper:function(e,t){return function(a,n){if(a)return i(e,a);var r,o=v.ensureConsistency(t,n);o.valueOf()?(v.handleConsistentResponse(t,o.model.data),i(e,null,o.model)):(r=g.byStatusCode(n))?i(e,r):i(e,g.badRequest(n))}},ensureConsistentModel:function(e,t){var a=new Boolean(!1),n=t&&i(e,t);return n&&(a=new Boolean(!0),a.model=n),a},ensureConsistency:function(e,t){var a=new Boolean(!1);return v.models[e]&&v.models[e].createModel&&(a=v.ensureConsistentModel(v.models[e].createModel,t)),a},handleConsistentResponse:function(e,t){return i(v.models[e]&&v.models[e].handleConsistentResponse,t)}},g=function(){var e=function(e,t){return"invalid_user"===e&&a(),{error_type:e,error_details:t}};e.byStatusCode=function(t){return t&&t.statusText&&t.json&&t.json.error_details?e(t.json.error_type||t.statusText.toLowerCase().replace(/ /g,"_"),t.json.error_details||""):e("unknown")};var t=["bad_request","in_progress","runtime","xhr_request","xhr_timeout"];return t.reduce(function(t,a){return t[a.toLowerCase().replace(/_(.)/g,function(e,t){return t.toUpperCase()})]=function(t){return e(a,t)},t},e)}();window.cell=y}(),!function(){var e={saveData:function(t){var a=e.getData();a?cell.saveData(a,t):"function"==typeof t&&t(a)},getData:function(){var e=!1;if(window.dataLayer&&dataLayer[0]&&dataLayer[0].arrCity&&dataLayer[0].depCity&&dataLayer[0]["dateInbound_DD/MM/YYYY"]&&dataLayer[0]["dateOutbound_DD/MM/YYYY"]&&dataLayer[0].adtQuantity&&dataLayer[0].cnnQuantity)e={},e.arrival_city=dataLayer[0].arrCity,e.departure_city=dataLayer[0].depCity,e.inbound_date=dataLayer[0]["dateInbound_DD/MM/YYYY"],e.outbound_date=dataLayer[0]["dateOutbound_DD/MM/YYYY"],e.adults=dataLayer[0].adtQuantity,e.children=dataLayer[0].cnnQuantity;else if(window.dataLayer&&dataLayer[4]&&dataLayer[4]["datos-viaje"]&&"string"==typeof dataLayer[4]["datos-viaje"]["fecha-final"]&&"string"==typeof dataLayer[4]["datos-viaje"]["fecha-inicio"]&&dataLayer[4]["datos-viaje"].adultos&&dataLayer[4]["datos-viaje"].nino&&dataLayer[4]["datos-vuelo"]&&"string"==typeof dataLayer[4]["datos-vuelo"]["ODA-C"]&&2===dataLayer[4]["datos-vuelo"]["ODA-C"].split("_").length){var t=dataLayer[4]["datos-vuelo"]["ODA-C"].split("_"),a=t[0],n=t[1];e={},e.arrival_city=n,e.departure_city=a,e.inbound_date=dataLayer[4]["datos-viaje"]["fecha-inicio"].replace(/^(\d{4})\-(\d{2})\-(\d{2})$/,"$3/$2/$1"),e.outbound_date=dataLayer[4]["datos-viaje"]["fecha-final"].replace(/^(\d{4})\-(\d{2})\-(\d{2})$/,"$3/$2/$1"),e.adults=dataLayer[4]["datos-viaje"].adultos,e.children=dataLayer[4]["datos-viaje"].nino}return e}};window.latam=e}();